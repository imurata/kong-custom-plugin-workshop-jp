## 問題の説明

カスタム認証セキュリティラボ

プラグインへの呼び出しごとに外部サービスにアクセスするカスタムプラグインを構築します。外部サービスのURLはプラグインの設定値として提供する必要があります。

認証用の外部サービスは Docker コンテナとして提供されます。試してみるには、`auth-service`ディレクトリ内の ReadMe を参照してください。

API呼び出し側は呼び出し時に2つのパラメータを指定します。

- Bearerトークン
- 顧客ID

認証サービスを開始するときに、有効なBearerトークンと顧客IDのリストを指定できます。

カスタムプラグインは以下の機能を持ちます。
- /auth/validate/token エンドポイントを呼び出して、API呼び出し元から提供されたBearerトークンを検証します (認証)
- /auth/validate/customer エンドポイントを呼び出して、API 呼び出し元から提供された顧客IDを検証します (承認)

両方が成功した場合、リクエストは認証されたとみなされ、プラグインはそれを上流のエンドポイントに送信します。
どちらかが失敗した場合、プラグインは適切なエラーを返してリクエストを終了します。
